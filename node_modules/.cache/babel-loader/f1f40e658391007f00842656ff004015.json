{"ast":null,"code":"var _jsxFileName = \"/home/pranita/Pictures/ai_project/rn-amplify/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useReducer, useEffect, useState } from 'react';\nimport './App.css';\nimport Header from './Header';\nimport Buttons from './Button';\nimport Form from './Form';\nimport { Hub, Auth } from 'aws-amplify';\nimport { FaSignOutAlt } from 'react-icons/fa';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialUserState = {\n  user: null,\n  loading: true\n};\n\nfunction App() {\n  _s();\n\n  const [userState, dispatch] = useReducer(reducer, initialUserState);\n  const [formState, updateFormState] = useState('base');\n  useEffect(() => {\n    // set listener for auth events\n    Hub.listen('auth', data => {\n      const {\n        payload\n      } = data;\n\n      if (payload.event === 'signIn') {\n        setImmediate(() => dispatch({\n          type: 'setUser',\n          user: payload.data\n        }));\n        setImmediate(() => window.history.pushState({}, null, 'http://localhost:3000/'));\n        updateFormState('base');\n      } // this listener is needed for form sign ups since the OAuth will redirect & reload\n\n\n      if (payload.event === 'signOut') {\n        setTimeout(() => dispatch({\n          type: 'setUser',\n          user: null\n        }), 350);\n      }\n    }); // we check for the current user unless there is a redirect to ?signedIn=true \n\n    if (!window.location.search.includes('?signedin=true')) {\n      checkUser(dispatch);\n    }\n  }, []); // This renders the custom form\n\n  if (formState === 'email') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.appContainer,\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        updateFormState: updateFormState\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.appContainer,\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      updateFormState: updateFormState\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), userState.loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.body,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }, this), !userState.user && !userState.loading && /*#__PURE__*/_jsxDEV(Buttons, {\n      updateFormState: updateFormState\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }, this), userState.user && userState.user.signInUserSession && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.body,\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Welcome \", userState.user.signInUserSession.idToken.payload.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: { ...styles.button,\n          ...styles.signOut\n        },\n        onClick: signOut,\n        children: [/*#__PURE__*/_jsxDEV(FaSignOutAlt, {\n          color: \"white\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: { ...styles.text\n          },\n          children: \"Sign Out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"o9gmraAVj9hHMxxowbaDz8t41fA=\");\n\n_c = App;\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'setUser':\n      return { ...state,\n        user: action.user,\n        loading: false\n      };\n\n    case 'loaded':\n      return { ...state,\n        loading: false\n      };\n\n    default:\n      return state;\n  }\n}\n\nasync function checkUser(dispatch) {\n  try {\n    const user = await Auth.currentAuthenticatedUser();\n    console.log('user: ', user);\n    dispatch({\n      type: 'setUser',\n      user\n    });\n  } catch (err) {\n    console.log('err: ', err);\n    dispatch({\n      type: 'loaded'\n    });\n  }\n}\n\nfunction signOut() {\n  Auth.signOut().then(data => {\n    console.log('signed out: ', data);\n  }).catch(err => console.log(err));\n}\n\nfunction Footer() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"demo App\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n}\n\n_c2 = Footer;\nconst styles = {\n  appContainer: {\n    paddingTop: 85\n  },\n  loading: {},\n  button: {\n    marginTop: 15,\n    width: '100%',\n    maxWidth: 250,\n    marginBottom: 10,\n    display: 'flex',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    padding: '0px 16px',\n    borderRadius: 2,\n    boxShadow: '0px 1px 3px rgba(0, 0, 0, .3)',\n    cursor: 'pointer',\n    outline: 'none',\n    border: 'none',\n    minHeight: 40\n  },\n  text: {\n    color: 'white',\n    fontSize: 14,\n    marginLeft: 10,\n    fontWeight: 'bold'\n  },\n  signOut: {\n    backgroundColor: 'black'\n  },\n  footer: {\n    fontWeight: '600',\n    padding: '0px 25px',\n    textAlign: 'right',\n    color: 'rgba(0, 0, 0, 0.6)'\n  },\n  anchor: {\n    color: 'rgb(255, 153, 0)',\n    textDecoration: 'none'\n  },\n  body: {\n    padding: '0px 30px',\n    height: '78vh'\n  }\n};\nexport default App;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"Footer\");","map":{"version":3,"sources":["/home/pranita/Pictures/ai_project/rn-amplify/src/App.js"],"names":["React","useReducer","useEffect","useState","Header","Buttons","Form","Hub","Auth","FaSignOutAlt","initialUserState","user","loading","App","userState","dispatch","reducer","formState","updateFormState","listen","data","payload","event","setImmediate","type","window","history","pushState","setTimeout","location","search","includes","checkUser","styles","appContainer","body","signInUserSession","idToken","email","button","signOut","text","state","action","currentAuthenticatedUser","console","log","err","then","catch","Footer","paddingTop","marginTop","width","maxWidth","marginBottom","display","justifyContent","alignItems","padding","borderRadius","boxShadow","cursor","outline","border","minHeight","color","fontSize","marginLeft","fontWeight","backgroundColor","footer","textAlign","anchor","textDecoration","height"],"mappings":"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","sourcesContent":["import React, { useReducer, useEffect, useState } from 'react';\nimport './App.css'\nimport Header from './Header'\nimport Buttons from './Button'\nimport Form from './Form'\n\nimport { Hub, Auth } from 'aws-amplify'\nimport { FaSignOutAlt } from 'react-icons/fa'\n\nconst initialUserState = { user: null, loading: true }\n\nfunction App() {\n  const [userState, dispatch] = useReducer(reducer, initialUserState)\n  const [formState, updateFormState] = useState('base')\n\n  useEffect(() => {\n    // set listener for auth events\n    Hub.listen('auth', (data) => {\n      const { payload } = data\n      if (payload.event === 'signIn') {\n        setImmediate(() => dispatch({ type: 'setUser', user: payload.data }))\n        setImmediate(() => window.history.pushState({}, null, 'http://localhost:3000/'))\n        updateFormState('base')\n      }\n      // this listener is needed for form sign ups since the OAuth will redirect & reload\n      if (payload.event === 'signOut') {\n        setTimeout(() => dispatch({ type: 'setUser', user: null }), 350)\n      }\n    })\n    // we check for the current user unless there is a redirect to ?signedIn=true \n    if (!window.location.search.includes('?signedin=true')) {\n      checkUser(dispatch)\n    }\n  }, [])\n\n  // This renders the custom form\n  if (formState === 'email') {\n    return (\n      <div style={styles.appContainer}>\n        <Header updateFormState={updateFormState} />\n        \n        <Form />\n      </div>\n      )\n  }\n\n  return (\n    <div style={styles.appContainer}>\n      <Header updateFormState={updateFormState} />\n      {\n        userState.loading && (\n          <div style={styles.body}>\n            <p>Loading...</p>\n          </div>\n        )\n      }\n      {\n        !userState.user && !userState.loading && (\n          <Buttons\n            updateFormState={updateFormState}\n          />\n        )\n      }\n      {\n        userState.user && userState.user.signInUserSession && (\n          <div style={styles.body}>\n            <h4>\n              Welcome {userState.user.signInUserSession.idToken.payload.email}\n            </h4>\n            <button\n              style={{ ...styles.button, ...styles.signOut }}\n              onClick={signOut}\n            >\n              <FaSignOutAlt color='white' />\n              <p style={{...styles.text}}>Sign Out</p>\n            </button>\n          </div>\n        )\n      }\n      <Footer />\n    </div>\n  )\n}\n\nfunction reducer (state, action) {\n  switch(action.type) {\n    case 'setUser':  \n      return { ...state, user: action.user, loading: false }\n    case 'loaded':\n      return { ...state, loading: false }\n    default:\n      return state\n  }\n}\n\nasync function checkUser(dispatch) {\n  try {\n    const user = await Auth.currentAuthenticatedUser()\n    console.log('user: ', user)\n    dispatch({ type: 'setUser', user })\n  } catch (err) {\n    console.log('err: ', err)\n    dispatch({ type: 'loaded' })\n  }\n}\n\nfunction signOut() {\n  Auth.signOut()\n    .then(data => {\n      console.log('signed out: ', data)\n    })\n    .catch(err => console.log(err));\n}\n\nfunction Footer () {\n  return (\n    <div>\n     \n     demo App\n    </div>\n  )\n}\n\nconst styles = {\n  appContainer: {\n    paddingTop: 85,\n  },\n  loading: {\n    \n  },\n  button: {\n    marginTop: 15,\n    width: '100%', \n    maxWidth: 250,\n    marginBottom: 10,\n    display: 'flex',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    padding: '0px 16px',\n    borderRadius: 2,\n    boxShadow: '0px 1px 3px rgba(0, 0, 0, .3)',\n    cursor: 'pointer',\n    outline: 'none',\n    border: 'none',\n    minHeight: 40\n  },\n  text: {\n    color: 'white',\n    fontSize: 14,\n    marginLeft: 10,\n    fontWeight: 'bold'\n  },\n  signOut: {\n    backgroundColor: 'black'\n  },\n  footer: {\n    fontWeight: '600',\n    padding: '0px 25px',\n    textAlign: 'right',\n    color: 'rgba(0, 0, 0, 0.6)'\n  },\n  anchor: {\n    color: 'rgb(255, 153, 0)',\n    textDecoration: 'none'\n  },\n  body: {\n    padding: '0px 30px',\n    height: '78vh'\n  }\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}